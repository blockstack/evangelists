
<section data-background="white">
![BlockStack](https://media.githubusercontent.com/media/blockstack/designs/master/logo/external/RGB/logo/blockstack-logo-vertical-bug%402x.png)
###### @blockstack

---


## Blockstack Todo ##

Note:

---

## What are we learning today? ##

* How to build a Single Page Javascript application with Blockstack
* How to manage authentication using a Blockstack ID
* How to use Blockstack Storage (Gaia) as an application backend.

Note:

---


### Requirements ###

* Installed and running Blockstack Browser
* Have a registered Blockstack name in the Browser
* node.js LTS Version -> v6.11.2

Note:

---

## Sign-In - Code ##

```js
if (blockstack.isUserSignedIn()) {
  this.user = blockstack.loadUserData().profile
} else if (blockstack.isSignInPending()) {
  blockstack.handlePendingSignIn()
  .then((userData) => {
    window.location = window.location.origin
  })
}

...

signIn () {
  const blockstack = this.blockstack
  blockstack.redirectToSignIn()
}
```

Note:

---

## Sign-In - How it works ##

1. Your browser generates an ephemeral keypair which is used for the signin request
2. It is also used to allow the application to store data in your private
3. The `authRequest` is returned to the browser via a `jwt`

Note:

---

## Sign-In - How it works (cont...) ##

```json
{
  "jti":"bbf82977-cc3e-4593-bacc-33ff3b749790",
  "iat":1501784293,
  "exp":1501787893,
  "iss":"did:btc-addr:1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa",
  "public_keys":[
    "a09932dx081273xmreDII8yhjd0m8ioawfokljISHhejrnHG"
  ],
  "domain_name":"http://localhost:8080/",
  "manifest_uri":"http://localhost:8080/manifest.json",
  "redirect_uri":"http://localhost:8080/",
  "scopes":[
    "store-write"
  ]
}
```

Note:

---

## Sign-In - How it works (cont...) ##

Clicking approve kicks off the following actions:
* An `authResponse` is generated by the Browser and local Core node similar to the `authRequest` above.
* This contains a private key, just for the application, that allows it to encrypt data on your storage
* You are now signed in!

Note:

---

## Storage - Code ##

```js
blockstack.getFile(STORAGE_FILE)
.then((todosText) => {
  var todos = JSON.parse(todosText || '[]')
  todos.forEach(function (todo, index) {
    todo.id = index
  })
  this.uidCount = todos.length
  this.todos = todos
})
...
handler: function (todos) {
  const blockstack = this.blockstack
  return blockstack.putFile(STORAGE_FILE, JSON.stringify(todos))
},
```

Note:

---

## Storage - How it works ##

* Uses the private key generated by the sign in to create files in your dropbox.
* These files consist of JSON stored by the application
* Making changes deletes the old file and creates a new one with the updated todos.

Note:

---

## Storage - How it works (cont...) ##

```json
[
  {
    "id":2,
    "text":"Software package manager secured by the blockchain",
    "completed":false
  },
  {
    "id":1,
    "text":"Mutable torrents with human readable names",
    "completed":false
  },
  {
    "id":0,
    "text":"Decentralized twitter",
    "completed":false
  }
]
```

---

## What now? ##

Go build the decentralized Internet!


Note:

---

## Find Us ##

* Slack - chat.blockstack.org
* Forum - forum.blockstack.org
* Twitter - @Blockstack
* Github - github.com/blockstack/
* Meetup - meetup.com/Blockstack-NYC
